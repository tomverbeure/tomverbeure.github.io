---
layout: post
title: Repairing an HP 5370A Time Interval Counter
date:   2025-07-16 00:00:00 -1000
categories:
---

* TOC
{:toc}

# Introduction

I bought an HP 5370A time interval counter at the 
[Silicon Valley Electronics Flea Market](https://www.electronicsfleamarket.com) for
a cheap $40.

![HP 5370A sitting on a desk](/assets/hp5370a/hp5370a_on_desk.jpg)

The 5370A is a pretty popular device among [time nuts](http://leapsecond.com/time-nuts.htm): 
it has a precision of 20ps for single-shot time interval measurements, amazing for a device that was 
released in 1978 and even compared to contemporary time interval counters it's still a decent performance. 
The 74LS chips in mine have a 1981 time code which makes the unit a whopping 44 years old.

But after I plugged it in and pressed the power button, smoke and a horrible smell came out after a 
few minutes.  

I had just purchased myself hours of entertainment!

# Inside the HP 5370A

It's trivial to open the 5370A:

* remove the 4 feet in the back by removing the screw inside them. My unit had regular
  Philips screws.
* remove a screw to release the top or bottom cover

[![HP 5370A top cover removed](/assets/hp5370a/hp5370a_top_cover_removed.jpg)](/assets/hp5370a/hp5370a_top_cover_removed.jpg)
*(Click to enlarge)*

Once inside, you can see an extremely modular build: the center consists of a motherboard 
with 10 plug-in PCBs. The top has plug-in PCBs as well, with the power supply on the left
and reference clock circuitry on the right. My unit uses the famous HP 10811-60111
high-stability [OCXO](https://en.wikipedia.org/wiki/Crystal_oven) as 10MHz clock reference. 
The bottom doesn't have plug-in PCBs. It has trigger logic and the front panel PCBs.

This kind of modular build probably adds significant cost, but it's a dream for servicing 
and finding faults. To make things even easier, the vertical PCBs have a plastic ring or levers 
to pull them out of their slot! There are also plenty of generously sized test pins and some 
status LEDs. 

![Plastic pull-ring on PCB](/assets/hp5370a/plastic_pull_ring.jpg)

# High Stability Reference Clock with an HP 10811-60111 OCXO

Since the unit has the high stability option, I have now yet another piece of test equipment
with an HP 10811-60111 OCXO. OCXOs are supposed to be powered on at all time: environmental 
changes tend to stress them out and result in a deviation of their clock speed, which is why 
there's a "24 hour warm-up" sticker on top of the case. It can indeed take quite a while for 
an OCXO to relax and settle back into its normal behavior, though 24 hours seems a bit excessive.

The OCXO has a separate always-on power supply just for the oven. This keeps the crystal at constant 
temperature, even when the power switch on the front is not in the ON position. Luckily, the
fan is powered off when the front switch is set to stand-by.[^1]

[^1]: My HP 8656A RF signal generator has an OCXO as well. But the fan keeps running
      even when it's in stand-by mode. The default fan is very loud too!


![Main power regulator, OCXO, OCXO power regulator and clock circuit](/assets/hp5370a/power_controller_and_ref_clock.jpg)

In the image above, from top to bottom, you can see:

* the main power supply control PCB
* the HP 10811-60111 OCXO. To the right of it is the main power relay.
* the OCXO oven power supply
* the reference frequency buffer PCB

These are the items that will play the biggest role during the repair.

# Finding Fault - RIFA Capacitors?

After plugging in the 5370A the first time, magic smoke came out of it along with a pretty
disgusting chemical smell, one that I already knew from some work that I did on an
HP 8656A RF signal generator. 

I unplugged the power, opened up the case, and looked for burnt components but couldn't
find any. After a while, I decided to power the unit back on and... nothing. No smoke,
no additional foul smell, but also no display.

One of common failure mode of test equipment from way back when are RIFA capacitors that sit 
right next to the mains power input, *before* any kind of power switch. Their primary function
is to filter out high frequency noise that's coming from the device and reduce EMI.
RIFAs have a well known tendency to crack over time and eventually catch fire. A couple of years ago, I
[replaced the RIFA capacitors of my HP 3457A](/2022/12/02/HP3478A-Multimeter-Calibration-Data-Backup-and-Battery-Replacement.html#replacing-the-capacitors),
but a general advice is to inspect all old equipment for these gold colored capacitors. However,
no such discrete capacitors could be found.

![Comcor F2058 line power module](/assets/hp5370a/Comcor_F2058.jpg)

But that doesn't mean they are not there: like a lot of older HP test equipment, the 5370A uses 
a Comcor F2058 line power module that has RIFA capacitors embedded inside.

Below is the schematic of the Comcor F2058 (HP part number 0960-0443). The capacitors are marked
in red. You can also see a fuse F1, a transformer and, on the right, a selector that can be used
to configure the device for 100V, 115V/120V, 220V and 230V/240V operation. 

[![Comcor F0258 schematic](/assets/hp5370a/Comcor_F2058_schematic.jpg)](/assets/hp5370a/Comcor_F2058_schematic.jpg)
*(Click to enlarge)*

The Comcor definitely had a bad smell, so chances are high that it was the cause of the smoke.
One should obviously replace something that was exposed to intense heat, but it doesn't have to be
done right away: after burning up, the RIFA capacitors usually are open and won't interfere with
the operation of the device, so let's postpone fixing this to later.

# Finding Fault - Problem Isolation

After plugging the unit back in, it still didn't work, but thanks to the 4 power rail status LEDs, it 
was immediately obvious that +15V power rail had issues. 

![4 status LEDs on the power controller PCB. The left one is off](/assets/hp5370a/status_leds.jpg)


I measured a voltage of 8V instead.

A close-by PCB is the clock reference presence detection board. It has a "10 MHz present" status
LED that didn't light up either, suggesting an issue with the 10811 OCXO, but I soon figured
out that this status LED relies on the presence of the 15V rail.

# Power Suppy Schematic

The 5370A was first released in 1978, decades before HP decided to stop including detailed
schematics in their service manuals.

The power supply architecture is straightforward: the line transformer has 5 separate windings,
4 for the main power supply and 1 for the always-on OCXO power supply. A relay is used to
disconnect the main power supply when the front power button is in stand-by position, but
the diode rectification bridge and the *gigantic* smoothing capacitors are located before
the relay.[^2]

[^2]: each smoothing capacitor has a bleeding resistor in parallel to discharge the capacitors
      when the power cable is unplugged. But these resistors will leak power even when the
      unit is switched off. Let's just say that EnergyStar regulations weren't a thing back in
      1978.

For each of the 4 main power rails, there's a discrete linear voltage regulator built
around a power transistor, LM307AN opamps and a smaller transistor for over-current protection.
There's also a fuse at the input of each regulator.

The 4 regulators share a 10V voltage reference.

The opamps and the voltage reference are powered by a simple +16.2V power rail built out of
a resistor and a Zener diode.

# Debugging

* 15V sometimes 8V, sometimes ~0V
* When unplugging the ref clock board: 
    * power always remains at 15V
    * connector pin 14_ of ref clock board has a 10 MHz clock
* 15V is only used for external clock circuit
* Desolder R16, 3.6 Ohm (10 Ohm in schematic) resistor that links
  connector 15V to internal 15V so that 15V is completely removed from ref clock board.
* After this:
    * 10 MHz (ECL) on INT clock test point
    * 15V rail still sold at 8V
* Only remaining path tou ground is 10uF capacitor C17 (marked 25+ -> 25V?)
    * It's burnt crisp!
    * Remove -> 15V stays on
* Still no display...
    * No clock on CLK testpoint of CPU board A9
    * This is a 10MHz that is derived from a clock that goes from the ref clock board
    * This clock requires 15V
* Add electrolytic 10uF cap and put resistor R16 back
    * After this, R16 burns up!



# Corcom

* A: orange *
* B: red, connected to Corcom N
* H: silver, connect to Corom L  (are red and silver swapped?)
* C: white/red/orange -> goes to fan 
* C: black *
* D: black/green *
* E: black/yellow *
* E: white/brown/orange -> goes to fan
* F: black/red *




# References
